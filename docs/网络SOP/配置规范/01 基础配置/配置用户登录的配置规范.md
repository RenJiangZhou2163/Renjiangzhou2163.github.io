# 基础配置

## 1. 配置用户登录的配置规范

### 1.1. 设备作为SSH客户端保存SSH公钥数应少于20个

当设备保存的SSH公钥数达到20个，设备作为SSH客户端无法登录新的服务器。

#### 1.1.1. 应用场景

设备作为SSH客户端登录SSH服务器。

#### 1.1.2. 配置规范

设备作为SSH客户端，保存的SSH公钥数需要少于20个。

#### 1.1.3. 非规范配置的风险

**风险描述**

设备保存的SSH公钥数达到20个时，通过 **stelnet** 命令无法登录到新的SSH服务器。

**风险的判断方法**

在用户视图下，执行 **display current-configuration | include assign rsa-key** 命令，查看客户端公钥数是否达到20个。

从显示信息可以看出，如下客户端公钥数已达到20个。

```
<HUAWEI> display current-configuration | include assign rsa-key
#
ssh client 1.1.1.1 assign rsa-key 1.1.1.1
ssh client 2.2.2.2 assign rsa-key 2.2.2.2
ssh client 3.3.3.3 assign rsa-key 3.3.3.3
ssh client 4.4.4.4 assign rsa-key 4.4.4.4
ssh client 5.5.5.5 assign rsa-key 5.5.5.5
ssh client 6.6.6.6 assign rsa-key 6.6.6.6
ssh client 7.7.7.7 assign rsa-key 7.7.7.7
ssh client 8.8.8.8 assign rsa-key 8.8.8.8
ssh client 9.9.9.9 assign rsa-key 9.9.9.9 
ssh client 1.1.2.1 assign rsa-key 1.1.2.1
ssh client 1.1.3.1 assign rsa-key 1.1.3.1
ssh client 1.1.4.1 assign rsa-key 1.1.4.1
ssh client 1.1.5.1 assign rsa-key 1.1.5.1
ssh client 1.1.6.1 assign rsa-key 1.1.6.1
ssh client 1.1.7.1 assign rsa-key 1.1.7.1
ssh client 1.1.8.1 assign rsa-key 1.1.8.1
ssh client 1.1.9.1 assign rsa-key 1.1.9.1
ssh client 1.1.10.1 assign rsa-key 1.1.10.1
ssh client 1.1.11.1 assign rsa-key 1.1.11.1
ssh client 1.1.12.1 assign rsa-key 1.1.12.1
#
```

**风险的恢复方案**

删除不使用的客户端公钥。

```
<HUAWEI> system-view
[HUAWEI] undo ssh client 1.1.1.2 assign rsa-key
```

### 1.2. VTY通道配置ACL的配置规范

当VTY下不配置ACL时可能受到外部攻击，造成CPU使用率高。

#### 1.2.1. 应用场景

用户通过Telnet或者SSH方式登录设备。

#### 1.2.2. 配置规范

VTY通道中通过配置ACL设置呼入呼出权限限制。

#### 1.2.3. 非规范配置的风险

**风险描述**

VTY通道下未配置ACL，设备受到外部报文攻击时，设备CPU使用率高，严重时会影响业务运行。

**风险的判断方法**

在用户视图下执行 **display current-configuration** 命令，查看VTY下面是否所有通道都配置了 **acl** *acl-number* **inbound** | **outbound**。

从显示信息可以看出，VTY 16-20未配置 **acl** *acl-number* **inbound** | **outbound** 。

```shell
<HUAWEI> display current-configuration configuration
#
user-interface vty 0 14
 acl 3100 inbound
 authentication-mode aaa
 protocol inbound ssh
user-interface vty 16 20 
 authentication-mode aaa
 protocol inbound ssh
#
```

**风险的恢复方案**

请按照配置规范进行配置。
